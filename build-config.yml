---
targets:
  - image: minimum2scp/ruby:latest
    platform: sid-amd64
    version: 2.4.8
    src: "https://cache.ruby-lang.org/pub/ruby/2.4/ruby-2.4.8.tar.bz2#e30eedd91386bec81489d2637522c9017aebba46f98e8b502f679df6b2f6a469"
    envs:
      RUBY_CONFIGURE_OPTS: "--enable-load-relative --disable-install-doc"
    before_build:
      ## assert no-merged-usr (see https://github.com/minimum2scp/dockerfiles/pull/191)
      - if [ -L /bin -o -L /lib -o -L /sbin ]; then exit 1; fi
      ## Install libssl-dev (OpenSSL 1.1.0 development files) instead of libssl1.0-dev (OpenSSL 1.0.2)
      - apt-get install -y libssl-dev
    after_build:
      - rbenv global 2.4.8
      - ruby --version
      - gem --version
      - gem update --system 3.0.6 -N
      - gem --version
      - gem install bundler --version 2.0.2 -f -N
      - gem install pry pry-doc pry-coolline -N
  - image: minimum2scp/ruby:latest
    platform: sid-amd64
    version: 2.5.7
    src: "https://cache.ruby-lang.org/pub/ruby/2.5/ruby-2.5.7.tar.bz2#e67c69b141ed27158e47d9a4fe7e59749135b0f138dce06c8c15c3214543f56f"
    envs:
      RUBY_CONFIGURE_OPTS: "--enable-load-relative --disable-install-doc"
    before_build:
      ## assert no-merged-usr (see https://github.com/minimum2scp/dockerfiles/pull/191)
      - if [ -L /bin -o -L /lib -o -L /sbin ]; then exit 1; fi
      ## Install libssl-dev (OpenSSL 1.1.0 development files) instead of libssl1.0-dev (OpenSSL 1.0.2)
      - apt-get install -y libssl-dev
    after_build:
      - rbenv global 2.5.7
      - ruby --version
      - gem --version
      - gem update --system 3.0.6 -N
      - gem --version
      - gem install bundler --version 2.0.2 -f -N
      - gem install pry pry-doc pry-coolline -N
  - image: minimum2scp/ruby:latest
    platform: sid-amd64
    version: 2.6.5
    src: "https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.5.tar.bz2#97ddf1b922f83c1f5c50e75bf54e27bba768d75fea7cda903b886c6745e60f0a"
    envs:
      RUBY_CONFIGURE_OPTS: "--enable-load-relative --disable-install-doc"
    before_build:
      ## assert no-merged-usr (see https://github.com/minimum2scp/dockerfiles/pull/191)
      - if [ -L /bin -o -L /lib -o -L /sbin ]; then exit 1; fi
      ## Install libssl-dev (OpenSSL 1.1.0 development files) instead of libssl1.0-dev (OpenSSL 1.0.2)
      - apt-get install -y libssl-dev
    after_build:
      - rbenv global 2.6.5
      - ruby --version
      - gem --version
      - gem update --system 3.0.6 -N
      - gem --version
      - gem install bundler --version 2.0.2 -f -N
      - gem install pry pry-doc pry-coolline -N
  - image: minimum2scp/ruby:latest
    platform: sid-amd64
    version: 2.7.0-preview1
    envs:
      RUBY_CONFIGURE_OPTS: "--enable-load-relative"
    before_build:
      ## assert no-merged-usr (see https://github.com/minimum2scp/dockerfiles/pull/191)
      - if [ -L /bin -o -L /lib -o -L /sbin ]; then exit 1; fi
      ## Install libssl-dev (OpenSSL 1.1.0 development files) instead of libssl1.0-dev (OpenSSL 1.0.2)
      - apt-get install -y libssl-dev
    after_build:
      - rbenv global 2.7.0-preview1
      - ruby --version
      - gem --version
      # - gem update --system 3.0.3 -N
      - gem --version
      # - gem install bundler --version 2.0.2 -f -N
      - gem install pry pry-doc pry-coolline -N
  - image: minimum2scp/ruby-buster:latest
    platform: buster-amd64
    version: 2.6.5
    src: "https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.5.tar.bz2#97ddf1b922f83c1f5c50e75bf54e27bba768d75fea7cda903b886c6745e60f0a"
    envs:
      RUBY_CONFIGURE_OPTS: "--enable-load-relative --disable-install-doc"
    before_build:
      ## assert no-merged-usr (see https://github.com/minimum2scp/dockerfiles/pull/191)
      - if [ -L /bin -o -L /lib -o -L /sbin ]; then exit 1; fi
      ## Install libssl-dev (OpenSSL 1.1.0 development files) instead of libssl1.0-dev (OpenSSL 1.0.2)
      - apt-get install -y libssl-dev
    after_build:
      - rbenv global 2.6.5
      - ruby --version
      - gem --version
      - gem update --system 3.0.6 -N
      - gem --version
      - gem install bundler --version 2.0.2 -f -N
      - gem install pry pry-doc pry-coolline -N
  - image: minimum2scp/ruby-stretch:latest
    platform: stretch-amd64
    version: 2.6.5
    src: "https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.5.tar.bz2#97ddf1b922f83c1f5c50e75bf54e27bba768d75fea7cda903b886c6745e60f0a"
    envs:
      RUBY_CONFIGURE_OPTS: "--enable-load-relative --disable-install-doc"
    before_build:
      ## Install libssl-dev (OpenSSL 1.1.0 development files) instead of libssl1.0-dev (OpenSSL 1.0.2)
      - apt-get install -y libssl-dev
    after_build:
      - rbenv global 2.6.5
      - ruby --version
      - gem --version
      - gem update --system 3.0.6 -N
      - gem --version
      - gem install bundler --version 2.0.2 -f -N
      - gem install pry pry-doc pry-coolline -N

